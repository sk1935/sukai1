# 🧩 项目设计与优化说明（AI 多模型预测系统）

## 1️⃣ 系统总体逻辑
系统目标：整合多个大模型（ChatGPT、Claude、Gemini、Grok、Qwen、DeepSeek等），
对 Polymarket 事件进行综合预测，并生成中文报告。

系统分为五层结构：
1. **事件层（Event Manager）**  
   接收并解析用户输入的事件描述（如 Telegram 消息）。  
   输出事件标题、描述、结算规则、当前市场概率等。

2. **提示层（Prompt Builder）**  
   根据事件信息生成多模型统一提示词。  
   每个模型使用同一事件描述，但可以根据模型特性调整角度。  
   输出：模型输入 prompt。

3. **推理层（Model Orchestrator）**  
   调用多个大模型 API（通过统一接口，例如 `api_router`）。  
   当前使用的模型包括：Grok、ChatGPT、Claude、Gemini、Qwen、DeepSeek。  
   模型返回的内容包括：  
   - 判断倾向（Yes/No）  
   - 理由说明  
   - 主观概率  

4. **融合层（Fusion Engine）**  
   对不同模型的预测进行加权融合。  
   当前阶段融合逻辑：  
   - 均值加权或按模型置信度动态权重  
   - 输出两项：AI 共识概率、市场概率  
   - 同时生成一句简短的“AI共识观点总结”

5. **输出层（Output Formatter）**  
   将最终结果输出为 **中文报告**，包含：  
   - 市场概率  
   - AI 共识概率  
   - AI 观点总结（中文）  

---

## 2️⃣ 当前不启用功能
- 定时任务（定期预测）  
- 缓存系统（历史结果存储）  
- 外部 API 依赖（如价格或趋势接口）

---

## 3️⃣ 技术约束与通用要求
- 所有输出文本为 **中文**  
- 代码要兼容多账号（不能依赖本地环境路径或账号绑定）  
- 调试时仅分析和修复局部问题  
- 每次修改都应保持模块接口一致

---

## 4️⃣ 待优化方向（下阶段）
- 针对不同模型的特长进行任务分工（例如 Claude 强逻辑、Gemini 强事实）  
- 加入“事件趋势 + 时间因素”判断模块  
- 优化 Prompt 模板结构（增加明确推理链要求）  
- 引入融合权重学习机制（根据历史预测准确率自动调整）

---

## ✅ 一句话总结
系统核心逻辑：  
> 「让多个模型在同一事件上各自分析 → 融合观点 → 生成中文预测报告。」  
后续优化方向集中在“模型特长利用”与“权重自适应融合”。
