#!/bin/bash
# å¿«é€ŸæŸ¥çœ‹DEBUGæ—¥å¿—çš„è„šæœ¬

echo "========================================================================"
echo "ðŸ” DEBUGæ—¥å¿—æŸ¥çœ‹å™¨"
echo "========================================================================"

# æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
if [ -f "bot_debug.log" ]; then
    LOG_FILE="bot_debug.log"
    echo "âœ… ä½¿ç”¨ bot_debug.log"
elif [ -f "bot_output.log" ]; then
    LOG_FILE="bot_output.log"
    echo "âœ… ä½¿ç”¨ bot_output.log"
else
    echo "âŒ æ²¡æœ‰æ‰¾åˆ°æ—¥å¿—æ–‡ä»¶"
    echo "ðŸ’¡ è¯·å…ˆè¿è¡Œbotï¼šbash start_bot.sh"
    exit 1
fi

echo ""
echo "ã€æœ€æ–°DEBUGæ—¥å¿—ã€‘ï¼ˆæœ€è¿‘50æ¡ï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
grep "\[DEBUG\]" "$LOG_FILE" 2>/dev/null | tail -50 || echo "  æš‚æ— DEBUGæ—¥å¿—"

echo ""
echo "ã€è¶…æ—¶æ—¥å¿—ã€‘ï¼ˆæœ€è¿‘20æ¡ï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
grep -E "\[TIMEOUT\]|Timeout" "$LOG_FILE" 2>/dev/null | tail -20 || echo "  æš‚æ— è¶…æ—¶æ—¥å¿—"

echo ""
echo "ã€é”™è¯¯æ—¥å¿—ã€‘ï¼ˆæœ€è¿‘20æ¡ï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
grep "\[ERROR\]" "$LOG_FILE" 2>/dev/null | tail -20 || echo "  æš‚æ— é”™è¯¯æ—¥å¿—"

echo ""
echo "ðŸ’¡ å®žæ—¶æŸ¥çœ‹ï¼štail -f $LOG_FILE"
echo "ðŸ’¡ æŸ¥çœ‹æ‰€æœ‰ï¼šgrep '\[DEBUG\]' $LOG_FILE"
